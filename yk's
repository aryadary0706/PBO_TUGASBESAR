

Struktur Database MySQL (`content.sql`)

sql
CREATE DATABASE IF NOT EXISTS content;
USE content;

CREATE TABLE Series (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255),
    genre VARCHAR(100),
    sinopsis TEXT
);

CREATE TABLE Review (
    id INT AUTO_INCREMENT PRIMARY KEY,
    series_id INT,
    reviewer VARCHAR(100),
    rating INT CHECK (rating >= 1 AND rating <= 5),
    review TEXT,
    FOREIGN KEY (series_id) REFERENCES Series(id)
);


Kelas Java (`Series.java`)

java
public class Series {
    private int id;
    private String title;
    private String genre;
    private String sinopsis;

    public Series(int id, String title, String genre, String sinopsis) {
        this.id = id;
        this.title = title;
        this.genre = genre;
        this.sinopsis = sinopsis;
    }

    public String contentPage() {
        return "seriesDetail.jsp?id=" + id;
    }

    // Getter dan setter
}

mainContent.jsp – Halaman utama tampilkan semua series + rata-rata rating

jsp
<%@ page import="java.sql.*" %>
<%@ page contentType="text/html;charset=UTF-8" %>
<html>
<head>
    <title>CINEMAGZ - Series</title>
    <style>
        body { font-family: 'Segoe UI'; background: #f8f8f8; margin: 40px; }
        .card {
            background: white; padding: 20px; margin-bottom: 20px;
            border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .title { font-size: 24px; font-weight: bold; }
        .genre { color: #888; margin-bottom: 10px; }
        .sinopsis { margin-bottom: 10px; }
        .rating { font-weight: bold; color: #f39c12; }
        a { text-decoration: none; color: #3498db; }
    </style>
</head>
<body>
    <h1>Daftar Series di CINEMAGZ</h1>
    <%
        Class.forName("com.mysql.cj.jdbc.Driver");
        Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/content", "root", "");
        Statement stmt = conn.createStatement();
        String query = "SELECT s.*, COALESCE(AVG(r.rating), 0) as avg_rating FROM Series s LEFT JOIN Review r ON s.id = r.series_id GROUP BY s.id";
        ResultSet rs = stmt.executeQuery(query);
        while(rs.next()) {
    %>
    <div class="card">
        <div class="title"><%= rs.getString("title") %></div>
        <div class="genre">Genre: <%= rs.getString("genre") %></div>
        <div class="sinopsis"><%= rs.getString("sinopsis") %></div>
        <div class="rating">Rata-rata Rating: <%= String.format("%.2f", rs.getDouble("avg_rating")) %></div>
        <a href="seriesDetail.jsp?id=<%= rs.getInt("id") %>">Lihat Detail & Tambah Review</a>
    </div>
    <%
        }
        conn.close();
    %>
</body>
</html>


seriesDetail.jsp – Detail series + tambah review

jsp
<%@ page import="java.sql.*" %>
<%@ page contentType="text/html;charset=UTF-8" %>
<%
    int id = Integer.parseInt(request.getParameter("id"));
    Class.forName("com.mysql.cj.jdbc.Driver");
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/content", "root", "");

    PreparedStatement ps = conn.prepareStatement("SELECT * FROM Series WHERE id = ?");
    ps.setInt(1, id);
    ResultSet rs = ps.executeQuery();
    rs.next();
%>
<html>
<head>
    <title><%= rs.getString("title") %> - CINEMAGZ</title>
</head>
<body>
    <h1><%= rs.getString("title") %></h1>
    <p><strong>Genre:</strong> <%= rs.getString("genre") %></p>
    <p><strong>Sinopsis:</strong> <%= rs.getString("sinopsis") %></p>

    <h2>Review</h2>
    <%
        PreparedStatement revStmt = conn.prepareStatement("SELECT * FROM Review WHERE series_id = ?");
        revStmt.setInt(1, id);
        ResultSet revs = revStmt.executeQuery();
        while(revs.next()) {
    %>
        <p><strong><%= revs.getString("reviewer") %></strong> beri rating <%= revs.getInt("rating") %>/5</p>
        <p><%= revs.getString("review") %></p>
        <hr/>
    <%
        }
    %>

    <h3>Tambah Review</h3>
    <form method="post" action="addReview.jsp">
        <input type="hidden" name="series_id" value="<%= id %>"/>
        Nama: <input type="text" name="reviewer" required/><br/>
        Rating: <input type="number" name="rating" min="1" max="5" required/><br/>
        Review: <textarea name="review" required></textarea><br/>
        <button type="submit">Submit</button>
    </form>
</body>
</html>
<%
    conn.close();
%>

addReview.jsp

jsp
<%@ page import="java.sql.*" %>
<%
    int seriesId = Integer.parseInt(request.getParameter("series_id"));
    String reviewer = request.getParameter("reviewer");
    int rating = Integer.parseInt(request.getParameter("rating"));
    String review = request.getParameter("review");

    Class.forName("com.mysql.cj.jdbc.Driver");
    Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/content", "root", "");

    PreparedStatement ps = conn.prepareStatement("INSERT INTO Review (series_id, reviewer, rating, review) VALUES (?, ?, ?, ?)");
    ps.setInt(1, seriesId);
    ps.setString(2, reviewer);
    ps.setInt(3, rating);
    ps.setString(4, review);
    ps.executeUpdate();

    conn.close();

    response.sendRedirect("seriesDetail.jsp?id=" + seriesId);
%>


